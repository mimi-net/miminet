{"version":3,"file":"jarallax-element.js","sources":["../src/utils/ready.js","../src/utils/global.js","../src/deprecated/ext-element.js","../src/deprecated/ext-element.umd.js"],"sourcesContent":["/**\n * Document ready callback.\n * @param {Function} callback - callback will be fired once Document ready.\n */\nfunction ready(callback) {\n  if (document.readyState === 'complete' || document.readyState === 'interactive') {\n    // Already ready or interactive, execute callback\n    callback();\n  } else {\n    document.addEventListener('DOMContentLoaded', callback, {\n      capture: true,\n      once: true,\n      passive: true,\n    });\n  }\n}\n\nexport default ready;\n","/* eslint-disable import/no-mutable-exports */\n/* eslint-disable no-restricted-globals */\nlet win;\n\nif (typeof window !== 'undefined') {\n  win = window;\n} else if (typeof global !== 'undefined') {\n  win = global;\n} else if (typeof self !== 'undefined') {\n  win = self;\n} else {\n  win = {};\n}\n\nexport default win;\n","import global from '../utils/global';\n\nfunction jarallaxElement(jarallax = global.jarallax) {\n  // eslint-disable-next-line no-console\n  console.warn(\n    \"Jarallax Element extension is DEPRECATED, please, avoid using it. We recommend you look at something like `lax.js` library <https://github.com/alexfoxy/lax.js>. It is much more powerful and has a less code (in cases when you don't want to add parallax backgrounds).\"\n  );\n\n  if (typeof jarallax === 'undefined') {\n    return;\n  }\n\n  const Jarallax = jarallax.constructor;\n\n  // redefine default methods\n  [\n    'initImg',\n    'canInitParallax',\n    'init',\n    'destroy',\n    'coverImage',\n    'isVisible',\n    'onScroll',\n    'onResize',\n  ].forEach((key) => {\n    const def = Jarallax.prototype[key];\n    Jarallax.prototype[key] = function (...args) {\n      const self = this;\n\n      if (key === 'initImg' && self.$item.getAttribute('data-jarallax-element') !== null) {\n        self.options.type = 'element';\n        self.pureOptions.speed = self.$item.getAttribute('data-jarallax-element') || '100';\n      }\n      if (self.options.type !== 'element') {\n        return def.apply(self, args);\n      }\n\n      self.pureOptions.threshold = self.$item.getAttribute('data-threshold') || '';\n\n      switch (key) {\n        case 'init': {\n          const speedArr = `${self.pureOptions.speed}`.split(' ');\n          self.options.speed = self.pureOptions.speed || 0;\n          self.options.speedY = speedArr[0] ? parseFloat(speedArr[0]) : 0;\n          self.options.speedX = speedArr[1] ? parseFloat(speedArr[1]) : 0;\n\n          const thresholdArr = self.pureOptions.threshold.split(' ');\n          self.options.thresholdY = thresholdArr[0] ? parseFloat(thresholdArr[0]) : null;\n          self.options.thresholdX = thresholdArr[1] ? parseFloat(thresholdArr[1]) : null;\n\n          def.apply(self, args);\n\n          // restore background image if available.\n          const originalStylesTag = self.$item.getAttribute('data-jarallax-original-styles');\n          if (originalStylesTag) {\n            self.$item.setAttribute('style', originalStylesTag);\n          }\n\n          return true;\n        }\n        case 'onResize': {\n          const defTransform = self.css(self.$item, 'transform');\n          self.css(self.$item, { transform: '' });\n          const rect = self.$item.getBoundingClientRect();\n          self.itemData = {\n            width: rect.width,\n            height: rect.height,\n            y: rect.top + self.getWindowData().y,\n            x: rect.left,\n          };\n          self.css(self.$item, { transform: defTransform });\n          break;\n        }\n        case 'onScroll': {\n          const wnd = self.getWindowData();\n          const centerPercent =\n            (wnd.y + wnd.height / 2 - self.itemData.y - self.itemData.height / 2) /\n            (wnd.height / 2);\n          const moveY = centerPercent * self.options.speedY;\n          const moveX = centerPercent * self.options.speedX;\n          let my = moveY;\n          let mx = moveX;\n          if (self.options.thresholdY !== null && moveY > self.options.thresholdY) my = 0;\n          if (self.options.thresholdX !== null && moveX > self.options.thresholdX) mx = 0;\n          self.css(self.$item, { transform: `translate3d(${mx}px,${my}px,0)` });\n          break;\n        }\n        case 'initImg':\n        case 'isVisible':\n        case 'coverImage':\n          return true;\n        // no default\n      }\n      return def.apply(self, args);\n    };\n  });\n}\n\nexport default jarallaxElement;\n","import domReady from '../utils/ready';\nimport global from '../utils/global';\n\nimport jarallaxElement from './ext-element';\n\njarallaxElement();\n\n// data-jarallax-element initialization\ndomReady(() => {\n  if (typeof global.jarallax !== 'undefined') {\n    global.jarallax(document.querySelectorAll('[data-jarallax-element]'));\n  }\n});\n\nexport default jarallaxElement;\n"],"names":["ready","callback","document","readyState","addEventListener","capture","once","passive","win","window","global","self","jarallaxElement","jarallax","console","warn","Jarallax","constructor","forEach","key","def","prototype","args","$item","getAttribute","options","type","pureOptions","speed","apply","threshold","speedArr","split","speedY","parseFloat","speedX","thresholdArr","thresholdY","thresholdX","originalStylesTag","setAttribute","defTransform","css","transform","rect","getBoundingClientRect","itemData","width","height","y","top","getWindowData","x","left","wnd","centerPercent","moveY","moveX","my","mx","domReady","querySelectorAll"],"mappings":"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"}