# Miminet Benchmark

–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –∏–∑–º–µ—Ä–µ–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —ç–º—É–ª—è—Ü–∏–∏ —Å–µ—Ç–µ–π Miminet.

---

## üìñ –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å](#–∫–∞–∫-–∑–∞–ø—É—Å—Ç–∏—Ç—å)
- [–§–æ—Ä–º–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤](#—Ñ–æ—Ä–º–∞—Ç-—Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤)
- [–û–ø–∏—Å–∞–Ω–∏–µ —ç—Ç–∞–ø–æ–≤](#–æ–ø–∏—Å–∞–Ω–∏–µ-—ç—Ç–∞–ø–æ–≤)
- [–ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è](#–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è)

---

## –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- Docker
- –ü—Ä–∏–≤–∏–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º (–¥–ª—è Mininet)
- ~30-60 –º–∏–Ω—É—Ç –¥–ª—è –ø–æ–ª–Ω–æ–≥–æ –±–µ–Ω—á–º–∞—Ä–∫–∞

> **‚ö†Ô∏è –í–∞–∂–Ω–æ –¥–ª—è Arch Linux –∏ –¥—Ä—É–≥–∏—Ö rolling-release –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤–æ–≤:**
> ```bash
> # –ó–∞–≥—Ä—É–∑–∏—Ç–µ –º–æ–¥—É–ª—å openvswitch –Ω–∞ —Ö–æ—Å—Ç–µ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º
> sudo modprobe openvswitch
> ```

### –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫:
```bash
cd back/benchmark

# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç (~1 –º–∏–Ω—É—Ç–∞)
./run_quick_benchmark.sh quick --output-file test

# –°—Ä–µ–¥–Ω–∏–π —Ç–µ—Å—Ç (~5 –º–∏–Ω—É—Ç)
./run_quick_benchmark.sh medium --output-file test

# –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç (~30 –º–∏–Ω—É—Ç)
./run_quick_benchmark.sh full --output-file test
```

### –ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è:
```bash
# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å–µ—Ç–∏
./run_benchmark_in_docker.sh \
  tests/test_json/router_network.json \
  tests/test_json/vlan_with_stp_network.json \
  --iterations 20 \
  --warmup 10 \
  --output-file my_benchmark

# –í—Å–µ —Å–µ—Ç–∏
./run_benchmark_in_docker.sh \
  tests/test_json/*_network.json \
  --iterations 20 \
  --warmup 10 \
  --output-file full \
  --continue-on-error
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `--iterations N` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 5)
- `--warmup N` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–≥—Ä–µ–≤–æ—á–Ω—ã—Ö –∏—Ç–µ—Ä–∞—Ü–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 10)
- `--output-file FILE` - –±–∞–∑–æ–≤–æ–µ –∏–º—è —Ñ–∞–π–ª–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–±–µ–∑ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è)
- `--continue-on-error` - –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

> **üìÅ –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–µ—Ç–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `benchmark_output_*/`. –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±–µ–Ω—á–º–∞—Ä–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ `benchmark` –≤ —Ñ–æ—Ä–º–∞—Ç–µ `.bench` (—Ç–µ–∫—Å—Ç) –∏ `.bench.json` (JSON).

---

## –§–æ—Ä–º–∞—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```
================================================================================
MIMINET EMULATION BENCHMARK REPORT
================================================================================
Warmup iterations: 10
Iterations per network: 20
Networks tested: 18

--------------------------------------------------------------------------------
Network: vlan_with_stp_network
--------------------------------------------------------------------------------
Total time (mean): 14.265s ¬± 0.050s
Total time (p95):  14.342s
Total time (p99):  14.378s

Stage                 Mean(s)    Std(s)   p95(s)   p99(s)   Share(%)
-----------------------------------------------------------------------
animation_creation      0.001     0.000    0.001    0.001       0.01
job_execution           3.078     0.015    3.102    3.115      21.58
network_init            0.409     0.024    0.445    0.458       2.87
network_start           8.311     0.028    8.358    8.378      58.26 
network_stop            2.465     0.036    2.523    2.545      17.28
packet_grouping         0.000     0.000    0.000    0.000       0.00
topology_creation       0.000     0.000    0.000    0.000       0.00
```

–ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–≤–∞ —Ñ–∞–π–ª–∞:
- `<name>.bench` - —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–π –æ—Ç—á–µ—Ç
- `<name>.bench.json` - JSON –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

---

## –û–ø–∏—Å–∞–Ω–∏–µ —ç—Ç–∞–ø–æ–≤

### 1. topology_creation
–°–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ —Ç–æ–ø–æ–ª–æ–≥–∏–∏ –∏–∑ JSON. –¢–∏–ø–∏—á–Ω–æ–µ –≤—Ä–µ–º—è: <0.01s

### 2. network_init
–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Mininet (—Å–æ–∑–¥–∞–Ω–∏–µ —Ö–æ—Å—Ç–æ–≤, —Å–≤–∏—á–µ–π, —Ä–æ—É—Ç–µ—Ä–æ–≤). –¢–∏–ø–∏—á–Ω–æ–µ –≤—Ä–µ–º—è: 0.1-0.7s

### 3. network_start 
- –ó–∞–ø—É—Å–∫ —É–∑–ª–æ–≤ —Å–µ—Ç–∏
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ VLAN/VXLAN/VTEP
- –û–∂–∏–¥–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (STP/RSTP convergence, DHCP)
- –ù–∞—á–∞–ª–æ –∑–∞—Ö–≤–∞—Ç–∞ —Ç—Ä–∞—Ñ–∏–∫–∞

–¢–∏–ø–∏—á–Ω–æ–µ –≤—Ä–µ–º—è:
- Non-STP —Å–µ—Ç–∏: 3s
- RSTP —Å–µ—Ç–∏: 5-11s
- STP —Å–µ—Ç–∏: 8-40s

### 4. job_execution
–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥ (ping, traceroute, DHCP). –¢–∏–ø–∏—á–Ω–æ–µ –≤—Ä–µ–º—è: 0.1-13s

### 5. packet_grouping
–ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –∑–∞—Ö–≤–∞—á–µ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤. –¢–∏–ø–∏—á–Ω–æ–µ –≤—Ä–µ–º—è: <0.01s

### 6. animation_creation
–°–æ–∑–¥–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏. –¢–∏–ø–∏—á–Ω–æ–µ –≤—Ä–µ–º—è: <0.01s

### 7. network_stop
–û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞, –æ—á–∏—Å—Ç–∫–∞ VLAN bridges, –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ Mininet. –¢–∏–ø–∏—á–Ω–æ–µ –≤—Ä–µ–º—è: 2-3s

---

## –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è

### Share(%)
–ü—Ä–æ—Ü–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ —ç—Ç–∞–ø–∞ –æ—Ç –æ–±—â–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —ç–º—É–ª—è—Ü–∏–∏.

**–ü—Ä–∏–º–µ—Ä:**
```
network_start    8.311s    58.26%  # 58% –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∑–∞–ø—É—Å–∫ —Å–µ—Ç–∏
job_execution    3.078s    21.58%  # 22% –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ jobs
```

### Std (Standard Deviation)
–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å –∏–∑–º–µ—Ä–µ–Ω–∏–π:
- **< 0.05s** - –æ—Ç–ª–∏—á–Ω–æ
- **0.05-0.1s** - —Ö–æ—Ä–æ—à–æ
- **> 0.1s** - –≤–æ–∑–º–æ–∂–Ω—ã —Ñ–ª—É–∫—Ç—É–∞—Ü–∏–∏

### p95 –∏ p99 (–ü–µ—Ä—Ü–µ–Ω—Ç–∏–ª–∏)
–ü–æ–∫–∞–∑—ã–≤–∞—é—Ç "—Ö–≤–æ—Å—Ç—ã" —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è - —Ö—É–¥—à–∏–µ —Å–ª—É—á–∞–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:
- **p95** - 95% –∏–∑–º–µ—Ä–µ–Ω–∏–π –±—ã–ª–∏ –±—ã—Å—Ç—Ä–µ–µ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è (5% –º–µ–¥–ª–µ–Ω–Ω–µ–µ)
- **p99** - 99% –∏–∑–º–µ—Ä–µ–Ω–∏–π –±—ã–ª–∏ –±—ã—Å—Ç—Ä–µ–µ —ç—Ç–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è (1% –º–µ–¥–ª–µ–Ω–Ω–µ–µ)

